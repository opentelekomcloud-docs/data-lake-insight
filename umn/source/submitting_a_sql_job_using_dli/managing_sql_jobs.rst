:original_name: dli_01_0017.html

.. _dli_01_0017:

Managing SQL Jobs
=================

Viewing Basic Job Information on the SQL Jobs Page
--------------------------------------------------

The **SQL Jobs** page displays all SQL jobs, which may span multiple pages if there are many jobs. You can navigate to a specific page as needed. DLI allows you to view jobs in all statuses. Jobs in the job list are sorted by creation time in descending order by default.

.. table:: **Table 1** SQL Job management parameters

   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   +===================================+===================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Queues                            | Name of the queue to which a job belongs                                                                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Username                          | Name of the user who executed the job.                                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Job type. The following types are supported:                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **IMPORT**: A job that imports data to DLI                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  **EXPORT**: A job that exports data from DLI                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **DCL**: Conventional DCLs and operations related to queue permissions                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   | -  **DDL**:Conventional DDLs, including creating and deleting databases and tables                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | -  **QUERY**: A job that queries data by running SQL statements                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **INSERT**: A job that inserts data by running SQL statements                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   | -  **UPDATE**: A job that updates data.                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   | -  **DELETE**: A job that deletes a SQL job.                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **DATA_MIGRATION**: A job that migrates data.                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   | -  **RESTART_QUEUE**: A job that restarts a queue.                                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | -  **SCALE_QUEUE**: A job that changes queue specifications, including sale-out and scale-in.                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Status                            | Job status. Possible values are as follows:                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **Submitting**                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                                   | -  **Running**                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   | -  **Finished**                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **Canceled**                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **Failed**                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  **Scaling**                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Query                             | SQL statements for operations such as exporting and creating tables                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | You can click |image1| to copy the query statement.                                                                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Duration                          | Running duration of a job                                                                                                                                                                                                                                                                                                                                                                                                                         |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Created                           | Time when a job is created. Jobs can be displayed in ascending or descending order of the job creation time.                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Operation                         | -  **Edit**: Edit the job.                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   | -  **Cancel**                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |    -  You can terminate a job only when the job is in **Submitting** or **Running** status.                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |    -  A job whose status is **Finished**, **Failed**, or **Canceled** cannot be terminated.                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |    -  If the **Cancel** button is gray, you are not allowed to perform this operation.                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **Re-execute**: Execute the job again.                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   | -  **SparkUI**: Display the Spark job execution page.                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |       -  When you execute a job on a created queue, the cluster is restarted. It takes about 10 minutes. If you click **SparkUI** before the cluster is created, an empty **projectID** will be cached. The SparkUI page cannot be displayed. You are advised to use a dedicated queue so that the cluster will not be released. Alternatively, wait for a while after the job is submitted (the cluster is created), and then check **SparkUI**. |
   |                                   |       -  SparkUI can currently only display the latest 100 jobs.                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  In addition to the preceding operations, the following operations are available for QUERY jobs and asynchronous DDL jobs.                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |    -  **View Result**: View the job running result.                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |    -  **Export Result**: Export the job running result to the created OBS bucket.                                                                                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  In addition to the preceding operations, the EXPORT job also includes the following operations:                                                                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |    -  **Download**                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | -  **View Log**: Save job logs to the temporary OBS bucket created by DLI.                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |    The **View Log** button is not available for synchronization jobs and jobs running on the default queue.                                                                                                                                                                                                                                                                                                                                       |
   +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Viewing Job Details
-------------------

On the **SQL Jobs** page, you can click |image2| in front of a job record to view details about the job.

Job details vary with job types. The job details vary depending on the job types, status, and configuration options. The following describes how to load data, create a table, and select a job. For details about other job types, see the information on the management console.

-  **Load data** (job type: IMPORT) include the following information: queue, job ID, username, type, status, execution statement, running duration, creation time, end time, parameter settings, label, number of results, scanned data, number of scanned data, number of error records, storage path, data format, database, table, table header, separator, reference character, escape character, date format, timestamp format, total CPU used, and output bytes.
-  **Create table** (job type: DDL) include the following information: queue, job ID, username, type, status, execution statement, running duration, creation time, end time, parameter settings, tags, number of results, scanned data, and database.
-  **Select** (job type: QUERY) include the following information: queue, job ID, username, type, status, execution statement, running duration, creation time, end time, parameter setting, label, number of results (results of successful executions can be exported), and scanned data, username, result status (results of successful tasks can be viewed. Failure causes of failed tasks are displayed), database, total CPU used, and output bytes.

   .. note::

      -  **Total CPU Used (Core x ms)**: total CPU used during job execution.
      -  **Output Bytes**: number of output bytes after the job is executed.

Searching for a Job
-------------------

On the **SQL Jobs** page, you can search jobs with any of the following operations.

-  Select a queue name.
-  Set the date range.
-  Enter a username, statement, or job ID.
-  Select the creation time in ascending or descending order.
-  Select a job type.
-  Select a job status.
-  Select the job execution duration in ascending or descending order.

Terminating a SQL Job
---------------------

On the **SQL Jobs** page, you can click **Terminate** in the **Operation** column to stop a submitting or running job.

.. |image1| image:: /_static/images/en-us_image_0000001209671182.png
.. |image2| image:: /_static/images/en-us_image_0206789824.png
