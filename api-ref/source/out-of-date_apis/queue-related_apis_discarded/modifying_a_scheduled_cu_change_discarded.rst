:original_name: dli_02_0295.html

.. _dli_02_0295:

Modifying a Scheduled CU Change (Discarded)
===========================================

Function
--------

This API is used to modify a scheduled CU change for a queue with a specified ID.

.. note::

   This API has been discarded and is not recommended.

URI
---

-  URI format

   PUT /v1/{project_id}/queues/{queue_name}/plans/{plan_id}

-  Parameter description

   .. table:: **Table 1** URI parameters

      +------------+-----------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter  | Mandatory | Type   | Description                                                                                                                                                                                     |
      +============+===========+========+=================================================================================================================================================================================================+
      | project_id | Yes       | String | Project ID, which is used for resource isolation. For details about how to obtain its value, see :ref:`Obtaining a Project ID <dli_02_0183>`.                                                   |
      +------------+-----------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | queue_name | Yes       | String | Name of the queue for which the scheduled CU change is to be modified. The name contains 1 to 128 characters. Use commas (,) to separate multiple queue names.                                  |
      +------------+-----------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | plan_id    | Yes       | String | ID of scheduled CU change to be modified. Use commas (,) to separate multiple IDs. For details about how to obtain the IDs, see :ref:`Viewing a Scheduled CU Change (Discarded) <dli_02_0292>`. |
      +------------+-----------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

.. table:: **Table 2** Request parameters

   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter        | Mandatory       | Type             | Description                                                                                                                                                                                                                                                                                                    |
   +==================+=================+==================+================================================================================================================================================================================================================================================================================================================+
   | plan_name        | Yes             | String           | Name of a CU change. The name can contain only digits, letters, and underscores (_), but cannot contain only digits or start with an underscore (_).                                                                                                                                                           |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | target_cu        | Yes             | Integer          | Target value of the CU in the scheduled CU change.                                                                                                                                                                                                                                                             |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | start_hour       | Yes             | Integer          | Specifies the start hour of the scheduled CU change.                                                                                                                                                                                                                                                           |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | start_minute     | Yes             | Integer          | Specifies the start minute of a scheduled CU change.                                                                                                                                                                                                                                                           |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repeat_day       | Yes             | Array of strings | Specifies the repetition period of a scheduled CU change. You can select one or more days from Monday to Sunday, or do not select any day. If this parameter is not specified, the scheduled CU change will be executed at the time specified by **start_hour: start_minute** after the current time. Example: |
   |                  |                 |                  |                                                                                                                                                                                                                                                                                                                |
   |                  |                 |                  | .. code-block::                                                                                                                                                                                                                                                                                                |
   |                  |                 |                  |                                                                                                                                                                                                                                                                                                                |
   |                  |                 |                  |    "repeat_day": ["MONDAY", "TUESDAY", "WEDNESDAY","SUNDAY"]                                                                                                                                                                                                                                                   |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | valid_date_begin | No              | Long             | Start time of the validity period (13-digit timestamp)                                                                                                                                                                                                                                                         |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | valid_date_end   | No              | Long             | End time of the validity period (13-digit timestamp)                                                                                                                                                                                                                                                           |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | activate         | No              | Boolean          | Indicates whether the scheduled CU change is activated. The default value is **true**, indicating that the change is activated.                                                                                                                                                                                |
   +------------------+-----------------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response
--------

.. table:: **Table 3** Response parameters

   +------------+-----------+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type    | Description                                                                                                                                                    |
   +============+===========+=========+================================================================================================================================================================+
   | is_success | No        | Boolean | Indicates whether the request is successfully executed. Value **true** indicates that the request is successfully executed.                                    |
   +------------+-----------+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | message    | No        | String  | System prompt. If execution succeeds, the parameter setting may be left blank.                                                                                 |
   +------------+-----------+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | queue_name | No        | String  | Name of the queue for which the scheduled CU change is to be modified. The name contains 1 to 128 characters. Use commas (,) to separate multiple queue names. |
   +------------+-----------+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | plan_id    | No        | String  | ID of scheduled CU change to be modified. Use commas (,) to separate multiple IDs.                                                                             |
   +------------+-----------+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

Modify the scaling plan named **plan_A**. After the modification, the number of CUs of the queue is scaled to 64 at 19:30 on Thursday and Friday, and the scaling plan is not activated.

.. code-block::

   {
       "plan_name": "plan_A",
       "target_cu": 64,
       "start_hour": 19,
       "start_minute": 30,
       "repeat_day": ["THURSDAY","FRIDAY"],
       "activate": false
   }

Example Response
----------------

.. code-block::

   {
       "is_success": true,
       "message": "",
       "queue_name": "queue1",
       "plan_id": 3
   }

Status Codes
------------

:ref:`Table 4 <dli_02_0295__t43c1f1c0ba344f4cbcb270953d9cca2a>` describes status codes.

.. _dli_02_0295__t43c1f1c0ba344f4cbcb270953d9cca2a:

.. table:: **Table 4** Status codes

   =========== ===========================================
   Status Code Description
   =========== ===========================================
   200         The modification operations are successful.
   400         Request failure.
   500         Internal service error.
   =========== ===========================================

Error Codes
-----------

If an error occurs when this API is invoked, the system does not return the result similar to the preceding example, but returns the error code and error information. For details, see :ref:`Error Codes <dli_02_0056>`.

.. table:: **Table 5** Error codes

   +-----------------------------------+-------------------------------------------------------------------------------------------------+
   | Error Code                        | Error Message                                                                                   |
   +===================================+=================================================================================================+
   | DLI.0999                          | Queue plans create failed. The plan plan_A can not generate a scale plan, please check all time |
   |                                   |                                                                                                 |
   |                                   | settings for the plan.                                                                          |
   +-----------------------------------+-------------------------------------------------------------------------------------------------+
