:original_name: dli_02_0196.html

.. _dli_02_0196:

Querying All Queues
===================

Function
--------

This API is used to list all queues under the project.

URI
---

-  URI format

   GET/v1.0/{project_id}/queues

-  Parameter description

   .. table:: **Table 1** URI parameter

      +------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter  | Mandatory | Type   | Description                                                                                                                                   |
      +============+===========+========+===============================================================================================================================================+
      | project_id | Yes       | String | Project ID, which is used for resource isolation. For details about how to obtain its value, see :ref:`Obtaining a Project ID <dli_02_0183>`. |
      +------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 2** query parameter description

      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                      |
      +=================+=================+=================+==================================================================================================================================================================================================================================================================+
      | queue_type      | No              | String          | Type of the queue. The options are as follows:                                                                                                                                                                                                                   |
      |                 |                 |                 |                                                                                                                                                                                                                                                                  |
      |                 |                 |                 | -  **sql**: queues for SQL jobs                                                                                                                                                                                                                                  |
      |                 |                 |                 | -  **general**: queues for Flink and Spark Jar jobs                                                                                                                                                                                                              |
      |                 |                 |                 | -  **all**: queues of all types                                                                                                                                                                                                                                  |
      |                 |                 |                 |                                                                                                                                                                                                                                                                  |
      |                 |                 |                 | If this parameter is not specified, the default value **sql** is used.                                                                                                                                                                                           |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | with-priv       | No              | Boolean         | Whether to return permission information.                                                                                                                                                                                                                        |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | page-size       | No              | Integer         | Maximum number of lines displayed on each page. The default value is **Integer.MAX_VALUE**, indicating that all results are displayed on one page.                                                                                                               |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | current-page    | No              | Integer         | Current page number. The default value is **1**.                                                                                                                                                                                                                 |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | order           | No              | String          | Filed based on which queues are ordered                                                                                                                                                                                                                          |
      |                 |                 |                 |                                                                                                                                                                                                                                                                  |
      |                 |                 |                 | The default value is **queue_name_asc** (alphabetically ascending order on queue names). Other options are **queue_name_desc** (alphabetically descending order on queue names), **cu_asc** (ascending order on CUs), and **cu_desc** (descending order on CUs). |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | tags            | No              | String          | Query results are filtered by tag.                                                                                                                                                                                                                               |
      +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

None

Response
--------

.. table:: **Table 3** Response parameters

   +------------+-----------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type            | Description                                                                                                                 |
   +============+===========+=================+=============================================================================================================================+
   | is_success | No        | Boolean         | Indicates whether the request is successfully executed. Value **true** indicates that the request is successfully executed. |
   +------------+-----------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
   | message    | No        | String          | System prompt. If execution succeeds, the parameter setting may be left blank.                                              |
   +------------+-----------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
   | queues     | No        | Array of Object | Queue information For details, see :ref:`Table 4 <dli_02_0196__table15962201134413>`.                                       |
   +------------+-----------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+

.. _dli_02_0196__table15962201134413:

.. table:: **Table 4** **queues** parameters description

   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type            | Description                                                                                                                                                                                          |
   +=======================+=================+=================+======================================================================================================================================================================================================+
   | queue_name            | No              | String          | Name of a queue.                                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | No              | String          | Queue description.                                                                                                                                                                                   |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | owner                 | No              | String          | User who creates a queue.                                                                                                                                                                            |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_time           | No              | Long            | Time when the queue is created. The timestamp is expressed in milliseconds.                                                                                                                          |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | queue_type            | No              | String          | Queue type.                                                                                                                                                                                          |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 | -  sql                                                                                                                                                                                               |
   |                       |                 |                 | -  general                                                                                                                                                                                           |
   |                       |                 |                 | -  all                                                                                                                                                                                               |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 | If this parameter is not specified, the default value **sql** is used.                                                                                                                               |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cu_count              | No              | Integer         | Number of compute units (CUs) bound to a queue, that is, the number of CUs in the current queue.                                                                                                     |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_id           | No              | String          | Resource ID of a queue.                                                                                                                                                                              |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | String          | Enterprise project ID. **0** indicates the default enterprise project.                                                                                                                               |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 | .. note::                                                                                                                                                                                            |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 |    Users who have enabled Enterprise Management can set this parameter to bind a specified project.                                                                                                  |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr_in_vpc           | No              | String          | The VPC CIDR block of the queue.                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr_in_mgntsubnet    | No              | String          | CIDR block of the management subnet                                                                                                                                                                  |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr_in_subnet        | No              | String          | Subnet CIDR block                                                                                                                                                                                    |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_mode         | No              | Integer         | Resource mode                                                                                                                                                                                        |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 | -  0: Shared queue                                                                                                                                                                                   |
   |                       |                 |                 | -  1: Dedicated queue                                                                                                                                                                                |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | platform              | No              | String          | CPU architecture of queue compute resources.                                                                                                                                                         |
   |                       |                 |                 |                                                                                                                                                                                                      |
   |                       |                 |                 | -  x86_64                                                                                                                                                                                            |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_restarting         | No              | Boolean         | Whether to restart the queue. The default value is **false**.                                                                                                                                        |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | labels                | No              | String          | Tag information of the queue to be created, including the JSON string indicating whether the queue is Dual-AZ. Currently, only the value **2** is supported, indicating that two queues are created. |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cu_spec               | No              | Integer         | Specifications of a queue.                                                                                                                                                                           |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cu_scale_out_limit    | No              | Integer         | Upper limit of the CU value for elastic scaling of the current queue.                                                                                                                                |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cu_scale_in_limit     | No              | Integer         | Lower limit of the CU value for elastic scaling of the current queue.                                                                                                                                |
   +-----------------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

None

Example Response
----------------

.. code-block::

   {
         "is_success": "true",
         "message": "",
         "queues": [
             {
                 "queue_name": "test",
                 "owner": "testuser",
                 "description": "",
                 "create_time": 1562221422671,
                 "queue_type": "spark",
                 "cu_count": 16,
                 "resource_id": "26afb850-d3c9-42c1-81c0-583d1163e80f",
                 "cidr_in_vpc": "10.0.0.0/8",
                 "cidr_in_subnet": "10.0.0.0/24",
                 "cidr_in_mgntsubnet": "10.23.128.0/24",
                 "resource_mode": 1,
                 "platform": "x86_64",
                 "is_restarting": "false",
                 "labels": "multi_az=2",
                 "resource_type": "vm",
                 "cu_spec": 16
             }
          ]
       }

Status Codes
------------

:ref:`Table 5 <dli_02_0196__tb12870f1c5f24b27abd55ca24264af36>` describes the status code.

.. _dli_02_0196__tb12870f1c5f24b27abd55ca24264af36:

.. table:: **Table 5** Status codes

   =========== ========================
   Status Code Description
   =========== ========================
   200         The query is successful.
   400         Request error.
   500         Internal service error.
   =========== ========================

Error Codes
-----------

If an error occurs when this API is invoked, the system does not return the result similar to the preceding example, but returns the error code and error information. For details, see :ref:`Error Codes <dli_02_0056>`.
