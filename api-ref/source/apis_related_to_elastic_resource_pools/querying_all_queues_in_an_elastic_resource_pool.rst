:original_name: dli_02_0330.html

.. _dli_02_0330:

Querying All Queues in an Elastic Resource Pool
===============================================

Function
--------

This API is used to query all queues in an elastic resource pool.

URI
---

-  URI format

   GET /v3/{project_id}/elastic-resource-pools/{elastic_resource_pool_name}/queues

-  Parameter description

   .. table:: **Table 1** URI parameters

      +----------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                  | Mandatory | Type   | Description                                                                                                                                   |
      +============================+===========+========+===============================================================================================================================================+
      | elastic_resource_pool_name | Yes       | String | Elastic resource pool name.                                                                                                                   |
      +----------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------+
      | project_id                 | Yes       | String | Project ID, which is used for resource isolation. For details about how to obtain its value, see :ref:`Obtaining a Project ID <dli_02_0183>`. |
      +----------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 2** query parameters

      ========== ========= ======= ========================================
      Parameter  Mandatory Type    Description
      ========== ========= ======= ========================================
      limit      No        Integer Page size. The default value is **100**.
      offset     No        Integer Offset. The default value is **0**.
      queue_name No        String  You can filter data by queue name.
      ========== ========= ======= ========================================

Request Parameters
------------------

None

Response Parameters
-------------------

.. table:: **Table 3** Response parameters

   +------------+-----------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type             | Description                                                                                                                                                    |
   +============+===========+==================+================================================================================================================================================================+
   | is_success | No        | Boolean          | Whether the request is successfully executed. Value **true** indicates that the request is successfully executed.                                              |
   +------------+-----------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | message    | No        | String           | System prompt. If execution succeeds, the message may be left blank.                                                                                           |
   +------------+-----------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | queues     | No        | Array of objects | Resource weight of all queues in the elastic resource pool. For details about the parameters, see :ref:`Table 4 <dli_02_0330__response_queue_priority_infos>`. |
   +------------+-----------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | count      | No        | Long             | Number of queues bound to the elastic resource pool.                                                                                                           |
   +------------+-----------+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _dli_02_0330__response_queue_priority_infos:

.. table:: **Table 4** queues

   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Mandatory | Type             | Description                                                                                                         |
   +========================+===========+==================+=====================================================================================================================+
   | queue_name             | No        | String           | Queue name.                                                                                                         |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id  | No        | String           | Enterprise project ID.                                                                                              |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | queue_type             | No        | String           | Queue type.                                                                                                         |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | queue_scaling_policies | No        | Array of objects | Scaling policy. For details about the parameters, see :ref:`priority_infos <dli_02_0330__response_priority_infos>`. |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | owner                  | No        | String           | Queue owner.                                                                                                        |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | create_time            | No        | Long             | Time when a queue is created.                                                                                       |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+
   | engine                 | No        | String           | Queue engine type.                                                                                                  |
   +------------------------+-----------+------------------+---------------------------------------------------------------------------------------------------------------------+

.. _dli_02_0330__response_priority_infos:

.. table:: **Table 5** queue_scaling_policies

   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+
   | Parameter         | Mandatory | Type    | Description                                                                                 |
   +===================+===========+=========+=============================================================================================+
   | priority          | No        | Integer | The policy priority ranges from 1 to 100. The value **100** indicates the highest priority. |
   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+
   | impact_start_time | No        | String  | Time when a policy takes effect.                                                            |
   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+
   | impact_stop_time  | No        | String  | Time when a policy expires.                                                                 |
   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+
   | min_cu            | No        | Integer | Minimum number of CUs.                                                                      |
   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+
   | max_cu            | No        | Integer | Maximum number of CUs.                                                                      |
   +-------------------+-----------+---------+---------------------------------------------------------------------------------------------+

Example Request
---------------

None

Example Response
----------------

.. code-block::

   {
     "is_success": true,
     "message": "",
     "count": 1,
     "queues": [
       {
         "queue_name": "lhm_sql",
         "enterprise_project_id": "0",
         "queue_type": "sql",
         "queue_scaling_policies": [
           {
             "priority": 50,
             "impact_start_time": "00:00",
             "impact_stop_time": "24:00",
             "min_cu": 16,
             "max_cu": 16
           },
           {
             "priority": 100,
             "impact_start_time": "00:00",
             "impact_stop_time": "12:00",
             "min_cu": 32,
             "max_cu": 64
           },
           {
             "priority": 50,
             "impact_start_time": "12:00",
             "impact_stop_time": "24:00",
             "min_cu": 16,
             "max_cu": 32
           }
         ]
       }
     ]
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

If an error occurs when this API is invoked, the system does not return the result similar to the preceding example, but returns the error code and error information. For details, see :ref:`Error Codes <dli_02_0056>`.
